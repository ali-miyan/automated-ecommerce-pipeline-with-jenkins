    <!DOCTYPE html>
    <html lang="en">


    <!-- Mirrored from htmldemo.net/furbar-1/furbar/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 14 Dec 2023 16:15:27 GMT -->
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <title>Furbar - Furniture eCommerce Bootstrap 5 Template</title>
        <meta name="robots" content="noindex, follow" />
        <meta name="description" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <!-- Favicon -->
        <link rel="shortcut icon" type="image/x-icon" href="asset/images/favicon.png" />

        <!-- CSS
        ============================================ -->

        <!-- Icon Font CSS -->
        <link rel="stylesheet" href="asset/css/plugins/pe-icon-7-stroke.css" />
        <link rel="stylesheet" href="asset/css/plugins/font-awesome.min.css" />

        <!-- Plugins CSS -->
        <link rel="stylesheet" href="asset/css/plugins/bootstrap.min.css" />
        <link rel="stylesheet" href="asset/css/plugins/animate.min.css" />
        <link rel="stylesheet" href="asset/css/plugins/swiper-bundle.min.css" />
        <link rel="stylesheet" href="asset/css/plugins/odometer.min.css" />
        <link rel="stylesheet" href="asset/css/plugins/select2.min.css" />
        <link rel="stylesheet" href="asset/css/plugins/ion.rangeSlider.min.css" />

        <!-- Main Style CSS -->
        <!-- <link rel="stylesheet" href="asset/css/style.css"> -->
        <link rel="stylesheet" href="asset/css/style.min.css" />
    </head>





<div class="card custom-card">
    <div class="card-body">
        <h2 class="custom-title">Verify OTP</h2>

            <div class="card-body">
                <% if(typeof message !== 'undefined') { %>
                    <div class="alert alert-danger alert-dismissible d-flex align-items-center fade show">
                        <i class="bi-exclamation-octagon-fill"></i>
                        <strong class="mx-auto"><%- message %></strong>
                    </div>
                <% } %>

            <form id="otpForm">
                <p id="resendMessage"></p>
                    <div class="otp-input-wrapper">
                        <input type="text" maxlength="4" name="otp" pattern="[0-9]*" autocomplete="off" class="form-control mb-3">
                        <svg viewBox="0 0 240 1" xmlns="http://www.w3.org/2000/svg" class="mb-3">
                            <line x1="0" y1="0" x2="240" y2="0" stroke="#3e3e3e" stroke-width="2" stroke-dasharray="44,22" />
                        </svg>
                        <input type="text" name="id" value="<%=id%>" hidden>
                    </div>
                    <button class="btn btn-primary btn-hover-dark mt-4 verify-btn" onclick="otpCheck()" type="button">Verify OTP</button>
                <button id="myButton" onclick="startTimer()" disabled>Click Me</button>
                <div id="timerDisplay"></div>
            </form>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    function startTimer() {
        const id = '<%=id%>';
        $.ajax({
        url: `/resendotp?id=${id}`,
        type: 'GET',
        success: function (data) {
            if (data.user) {
                console.log('sentedddddddddddddd');
                setTimeout(() => {
                    document.getElementById('resendMessage').value = 'new otp has been sented to your mail'
                }, 3000);

            }     
        },
        error: function (error) {
            console.error('Error:', error);
        }
    });

        var secondsRemaining = 60;

        document.getElementById('myButton').disabled = true;

        var timerInterval = setInterval(function () {
            document.getElementById('timerDisplay').innerText = 'resend otp in: ' + secondsRemaining + ' seconds';

            if (secondsRemaining <= 0) {
                clearInterval(timerInterval);
                document.getElementById('myButton').disabled = false;
                document.getElementById('timerDisplay').innerText = '';
            } else {
                secondsRemaining--;
            }
        }, 1000);
    }
    window.onload = startTimer;

function otpCheck() {
    const formData = $('#otpForm').serialize();
    console.log('otppppppppppppp');

    $.ajax({
        url: '/otp',
        type: 'POST',
        data: formData,
        success: function (data) {
            if (data.otp === false) {
                    Swal.fire({
                        icon: 'info',
                        title: 'oops...',
                        text: data.message,
                    });
                    return;
            } else if(data.otp == 'expired'){
                Swal.fire({
                    icon: 'info',
                    title: 'has expired',
                    text: data.message,
                });
                return;
            }else if(data.otp == 'invalid'){
                Swal.fire({
                    icon: 'error',
                    title: 'invalid otp',
                    text: data.message,
                });
                return;
            }else if(data.otp){
                window.location.href = `/`;
            }
            
        },
        error: function (error) {
            // Handle errors
            console.error('Error:', error);
        }
    });
}

</script>
<!-- Modernizer & jQuery JS -->
<script src="asset/js/vendor/modernizr-3.11.2.min.js"></script>
<script src="asset/js/vendor/jquery-3.5.1.min.js"></script>

<!-- Bootstrap JS -->
<script src="asset/js/plugins/popper.min.js"></script>
<script src="asset/js/plugins/bootstrap.min.js"></script>

<!-- Plugins JS -->
<script src="asset/js/plugins/swiper-bundle.min.js"></script>
<script src="asset/js/plugins/ajax-contact.js"></script>
<script src="asset/js/plugins/odometer.min.js"></script>
<script src="asset/js/plugins/select2.min.js"></script>
<script src="asset/js/plugins/ion.rangeSlider.min.js"></script>
<script src="asset/js/plugins/jquery.zoom.min.js"></script>

<!-- Main JS -->
<script src="asset/js/main.js"></script>

</body>


<!-- Mirrored from htmldemo.net/furbar-1/furbar/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 14 Dec 2023 16:16:01 GMT -->
</html>